<?xml version="1.0" encoding="UTF-8"?>
<project name="tempo/tempo" default="all">

    <target name="all" depends="lint,cpd,cs,test"/>

    <target name="lint">
        <apply executable="php" failonerror="true">
            <arg value="-l" />

            <fileset dir=".">
                <modified />
                <exclude name="vendor/" />
                <include name="**/*.php" />
            </fileset>
        </apply>
    </target>

    <target name="cpd">
        <exec executable="vendor/bin/phpcpd" failonerror="true">
            <arg value="--exclude=vendor" />
            <arg value="--exclude=Test" />
            <arg path="." />
        </exec>
    </target>

    <target name="cs">
        <exec executable="vendor/bin/phpcs" failonerror="true">
            <arg value="--standard=phpcs.xml" />
            <arg value="--extensions=php,inc" />
            <arg path="." />
        </exec>
    </target>

    <target name="test">
        <exec executable="vendor/bin/phpunit" failonerror="true" />
    </target>

</project>
